!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";var i="\n".charCodeAt(0),r="\t".charCodeAt(0),o="\f".charCodeAt(0),a="\r".charCodeAt(0),s="=".charCodeAt(0),u='"'.charCodeAt(0),h=" ".charCodeAt(0),l="[".charCodeAt(0),c="]".charCodeAt(0),f="/".charCodeAt(0),T="\\".charCodeAt(0),k=String.fromCharCode;t.exports={getChar:k,N:i,F:o,R:a,TAB:r,EQ:s,QUOTEMARK:u,SPACE:h,OPEN_BRAKET:l,CLOSE_BRAKET:c,SLASH:f,PLACEHOLDER_SPACE_TAB:"    ",PLACEHOLDER_SPACE:" ",BACKSLASH:T}},function(t,e,n){"use strict";t.exports=n(2)},function(t,e,n){"use strict";var i=n(3),r=n(5),o=void 0,a=void 0,s=void 0,u=void 0,h={},l=null,c=function(){return s.length?s[s.length-1]:null},f=function(t){return s.push(r.create(t.getValue()))},T=function(){return u.length?u[u.length-1]:c().tag},k=function(){u.length&&u.pop()},d=function(){s.length&&(s.pop(),k())},v=function(t){(a.length?a[a.length-1].content:o).push(t)},A=function(t){t.isStart()&&(f(t),!function(t){return l.isTokenNested(t)}(t)?(v(c()),d()):a.push(c()))},g=function(t){t.isTag()&&(function(t){return!h.onlyAllowTags||!h.onlyAllowTags.length||h.onlyAllowTags.indexOf(t)>=0}(t.getName())?(A(t),function(t){if(t.isEnd()){d();var e=a.pop();if(e)v(e);else if(h.onError){var n=t.getValue(),i=t.getLine(),r=t.getColumn();h.onError({message:"Inconsistent tag '"+n+"' on line "+i+" and column "+r,lineNumber:i,columnNumber:r})}}}(t)):v(t.toString()))},E=function(t){var e=c();e?t.isAttrName()?(!function(t){u.push(t.getValue())}(t),e.attr(T(),null)):t.isAttrValue()?(e.attr(T(),t.getValue()),k()):t.isText()&&e.append(t.getValue()):t.isText()&&v(t.getValue())},p=function(t){g(t),E(t)};t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h=e,l=(e.createTokenizer?e.createTokenizer:function(t,e){return new i(t,{onToken:e})})(t,p),o=[],a=[],s=[],u=[],l.tokenize(),o},t.exports.createTagNode=f},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=n(0),a=o.getChar,s=o.OPEN_BRAKET,u=o.CLOSE_BRAKET,h=o.EQ,l=o.TAB,c=o.SPACE,f=o.N,T=o.QUOTEMARK,k=o.PLACEHOLDER_SPACE,d=o.PLACEHOLDER_SPACE_TAB,v=o.SLASH,A=o.BACKSLASH,g=n(4),E=function(t,e,n,i){return new g(t,e,n,i)},p=function(){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.buffer=e,this.colPos=0,this.rowPos=0,this.index=2**32,this.tokenIndex=-1,this.tokens=new Array(Math.floor(this.buffer.length)),this.dummyToken=null,this.wordToken=this.dummyToken,this.tagToken=this.dummyToken,this.attrNameToken=this.dummyToken,this.attrValueToken=this.dummyToken,this.attrTokens=[],this.options=i,this.charMap=(r(n={},l,this.charSPACE.bind(this)),r(n,c,this.charSPACE.bind(this)),r(n,f,this.charN.bind(this)),r(n,s,this.charOPENBRAKET.bind(this)),r(n,u,this.charCLOSEBRAKET.bind(this)),r(n,h,this.charEQ.bind(this)),r(n,T,this.charQUOTEMARK.bind(this)),r(n,A,this.charBACKSLASH.bind(this)),r(n,"default",this.charWORD.bind(this)),n)}return i(t,[{key:"emitToken",value:function(t){this.options.onToken&&this.options.onToken(t)}},{key:"appendToken",value:function(t){this.tokenIndex+=1,this.tokens[this.tokenIndex]=t,this.emitToken(t)}},{key:"skipChar",value:function(t){this.index+=t,this.colPos+=t}},{key:"seekChar",value:function(t){return this.buffer.charCodeAt(this.index+t)}},{key:"nextCol",value:function(){this.colPos+=1}},{key:"nextLine",value:function(){this.rowPos+=1}},{key:"flushWord",value:function(){this.inWord()&&this.wordToken[g.VALUE_ID]&&(this.appendToken(this.wordToken),this.wordToken=this.createWordToken(""))}},{key:"createWord",value:function(t,e,n){this.inWord()||(this.wordToken=this.createWordToken(t,e,n))}},{key:"flushTag",value:function(){if(this.inTag()){if(""===this.tagToken[g.VALUE_ID]){var t=this.inAttrValue()?a(h):"",e=a(s)+t+a(u);return this.createWord("",0,0),this.wordToken[g.VALUE_ID]+=e,this.tagToken=this.dummyToken,void(this.inAttrValue()&&(this.attrValueToken=this.dummyToken))}this.inAttrName()&&!this.inAttrValue()&&(this.tagToken[g.VALUE_ID]+=k+this.attrNameToken[g.VALUE_ID],this.attrNameToken=this.dummyToken),this.appendToken(this.tagToken),this.tagToken=this.dummyToken}}},{key:"flushUnclosedTag",value:function(){if(this.inTag()){var t=this.tagToken[g.VALUE_ID]+(this.attrValueToken&&this.attrValueToken[g.VALUE_ID]?a(h):"");this.tagToken[g.TYPE_ID]=g.TYPE_WORD,this.tagToken[g.VALUE_ID]=a(s)+t,this.appendToken(this.tagToken),this.tagToken=this.dummyToken,this.inAttrValue()&&(this.attrValueToken=this.dummyToken)}}},{key:"flushAttrNames",value:function(){this.inAttrName()&&(this.attrTokens.push(this.attrNameToken),this.attrNameToken=this.dummyToken),this.inAttrValue()&&(this.attrValueToken.quoted=void 0,this.attrTokens.push(this.attrValueToken),this.attrValueToken=this.dummyToken)}},{key:"flushAttrs",value:function(){this.attrTokens.length&&(this.attrTokens.forEach(this.appendToken.bind(this)),this.attrTokens=[])}},{key:"charSPACE",value:function(t){var e=t===l?d:k;this.flushWord(),this.inTag()?this.inAttrValue()&&this.attrValueToken.quoted?this.attrValueToken[g.VALUE_ID]+=e:(this.flushAttrNames(),this.attrNameToken=this.createAttrNameToken("")):this.appendToken(this.createSpaceToken(e)),this.nextCol()}},{key:"charN",value:function(t){this.flushWord(),this.appendToken(this.createNewLineToken(a(t))),this.nextLine(),this.colPos=0}},{key:"charOPENBRAKET",value:function(t){var e=this.seekChar(1);e===c||e===l?(this.createWord(),this.wordToken[g.VALUE_ID]+=a(t)):(this.flushWord(),this.tagToken=this.createTagToken("")),this.nextCol()}},{key:"charCLOSEBRAKET",value:function(t){var e=this.seekChar(-1);(e===c||e===l)&&(this.wordToken[g.VALUE_ID]+=a(t)),this.nextCol(),this.flushTag(),this.flushAttrNames(),this.flushAttrs()}},{key:"charEQ",value:function(t){var e=this.seekChar(1)===T;this.inTag()?(this.attrValueToken=this.createAttrValueToken(""),e&&(this.attrValueToken.quoted=!0,this.skipChar(1))):this.wordToken[g.VALUE_ID]+=a(t),this.nextCol()}},{key:"charQUOTEMARK",value:function(t){var e=this.seekChar(-1)===A;this.inAttrValue()&&this.attrValueToken[g.VALUE_ID]&&this.attrValueToken.quoted&&!e?this.flushAttrNames():this.inTag()||(this.wordToken?this.wordToken[g.VALUE_ID]+=a(t):this.wordToken=this.createWordToken(a(t))),this.nextCol()}},{key:"charBACKSLASH",value:function(){var t=this.seekChar(1),e=t===T;this.inAttrValue()&&this.attrValueToken[g.VALUE_ID]&&this.attrValueToken.quoted&&e&&(this.attrValueToken[g.VALUE_ID]+=a(t),this.skipChar(1)),this.nextCol()}},{key:"charWORD",value:function(t){this.inTag()?this.inAttrValue()?this.attrValueToken[g.VALUE_ID]+=a(t):this.inAttrName()?this.attrNameToken[g.VALUE_ID]+=a(t):this.tagToken[g.VALUE_ID]+=a(t):(this.createWord(),this.wordToken[g.VALUE_ID]+=a(t)),this.nextCol()}},{key:"tokenize",value:function(){for(this.index=0;this.index<this.buffer.length;){var t=this.buffer.charCodeAt(this.index);(this.charMap[t]||this.charMap.default)(t),++this.index}return this.flushWord(),this.flushUnclosedTag(),this.tokens.length=this.tokenIndex+1,this.tokens}},{key:"inWord",value:function(){return this.wordToken&&this.wordToken[g.TYPE_ID]}},{key:"inTag",value:function(){return this.tagToken&&this.tagToken[g.TYPE_ID]}},{key:"inAttrValue",value:function(){return this.attrValueToken&&this.attrValueToken[g.TYPE_ID]}},{key:"inAttrName",value:function(){return this.attrNameToken&&this.attrNameToken[g.TYPE_ID]}},{key:"createWordToken",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.colPos,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rowPos;return E(g.TYPE_WORD,t,e,n)}},{key:"createTagToken",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.colPos,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rowPos;return E(g.TYPE_TAG,t,e,n)}},{key:"createAttrNameToken",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.colPos,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rowPos;return E(g.TYPE_ATTR_NAME,t,e,n)}},{key:"createAttrValueToken",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.colPos,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rowPos;return E(g.TYPE_ATTR_VALUE,t,e,n)}},{key:"createSpaceToken",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.colPos,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rowPos;return E(g.TYPE_SPACE,t,e,n)}},{key:"createNewLineToken",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.colPos,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rowPos;return E(g.TYPE_NEW_LINE,t,e,n)}},{key:"isTokenNested",value:function(t){var e=a(s)+a(v)+t.getValue();return this.buffer.indexOf(e)>-1}}]),t}();t.exports=p,t.exports.createTokenOfType=E},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=n(0),o=r.getChar,a=r.OPEN_BRAKET,s=r.CLOSE_BRAKET,u=r.SLASH,h=function(t){return t.value},l=function(t){return h(t).charCodeAt(0)===u},c=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=String(e),this.value=String(n),this.line=Number(i),this.row=Number(r)}return i(t,[{key:"isEmpty",value:function(){return!!this.type}},{key:"isText",value:function(){return function(t){return"space"===t.type||"new-line"===t.type||"word"===t.type}(this)}},{key:"isTag",value:function(){return function(t){return"tag"===t.type}(this)}},{key:"isAttrName",value:function(){return function(t){return"attr-name"===t.type}(this)}},{key:"isAttrValue",value:function(){return function(t){return"attr-value"===t.type}(this)}},{key:"isStart",value:function(){return function(t){return!l(t)}(this)}},{key:"isEnd",value:function(){return l(this)}},{key:"getName",value:function(){return function(t){var e=h(t);return l(t)?e.slice(1):e}(this)}},{key:"getValue",value:function(){return h(this)}},{key:"getLine",value:function(){return function(t){return t.line}(this)}},{key:"getColumn",value:function(){return function(t){return t.row}(this)}},{key:"toString",value:function(){return function(t){var e=o(a);return l(t)&&(e+=o(u)),e+=h(t),e+=o(s)}(this)}}]),t}();t.exports=c,t.exports.TYPE_ID="type",t.exports.VALUE_ID="value",t.exports.LINE_ID="line",t.exports.COLUMN_ID="row",t.exports.TYPE_WORD="word",t.exports.TYPE_TAG="tag",t.exports.TYPE_ATTR_NAME="attr-name",t.exports.TYPE_ATTR_VALUE="attr-value",t.exports.TYPE_SPACE="space",t.exports.TYPE_NEW_LINE="new-line"},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=n(0),o=r.getChar,a=r.OPEN_BRAKET,s=r.CLOSE_BRAKET,u=r.SLASH,h=n(1),l=h.getNodeLength,c=h.appendToNode,f=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tag=e,this.attrs=n,this.content=i}return i(t,[{key:"attr",value:function(t,e){return void 0!==e&&(this.attrs[t]=e),this.attrs[t]}},{key:"append",value:function(t){return c(this,t)}},{key:"toString",value:function(){var t=o(a),e=o(s),n=o(u);return t+this.tag+e+this.content.reduce(function(t,e){return t+e.toString()},"")+t+n+this.tag+e}},{key:"length",get:function(){return l(this)}}]),t}();t.exports=f,t.exports.create=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new f(t,e,n)},t.exports.isOf=function(t,e){return t.tag===e}}]);